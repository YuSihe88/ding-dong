#!/usr/bin/env ts-node
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const tstest_1 = __importDefault(require("tstest"));
const string_matcher_1 = require("./string-matcher");
tstest_1.default('stringMatcher() smoke testing', async (t) => {
    const matcher = string_matcher_1.stringMatcher();
    t.equal(typeof matcher, 'function', 'should return a match function');
});
tstest_1.default('stringMatcher()', async (t) => {
    const TEXT_OK = 'hello';
    const TEXT_NOT_OK = 'world';
    const falseMatcher = string_matcher_1.stringMatcher();
    t.false(await falseMatcher(TEXT_OK), 'should not match any string: TEXT_OK');
    t.false(await falseMatcher(TEXT_NOT_OK), 'should not match any string: TEXT_NOT_OK');
    const textMatcher = string_matcher_1.stringMatcher(TEXT_OK);
    t.true(await textMatcher(TEXT_OK), 'should match expected TEXT');
    t.false(await textMatcher(TEXT_NOT_OK), 'should not match unexpected string');
    const textListMatcher = string_matcher_1.stringMatcher([TEXT_OK]);
    t.true(await textListMatcher(TEXT_OK), 'should match expected TEXT by list');
    t.false(await textListMatcher(TEXT_NOT_OK), 'should not match unexpected string by list');
    const regexpMatcher = string_matcher_1.stringMatcher(new RegExp(TEXT_OK));
    t.false(await regexpMatcher(TEXT_NOT_OK), 'should not match unexpected string by regexp');
    t.true(await regexpMatcher(TEXT_OK), 'should match expected from by regexp');
    const regexpListMatcher = string_matcher_1.stringMatcher([new RegExp(TEXT_OK)]);
    t.false(await regexpListMatcher(TEXT_NOT_OK), 'should not match unexpected string by regexp list');
    t.true(await regexpListMatcher(TEXT_OK), 'should match expected from by regexp list');
    const stringFilter = (text) => text === TEXT_OK;
    const functionMatcher = string_matcher_1.stringMatcher(stringFilter);
    t.false(await functionMatcher(TEXT_NOT_OK), 'should not match unexpected string by function');
    t.true(await functionMatcher(TEXT_OK), 'should match expected from by function');
    const functionListMatcher = string_matcher_1.stringMatcher([stringFilter]);
    t.false(await functionListMatcher(TEXT_NOT_OK), 'should not match unexpected string by function list');
    t.true(await functionListMatcher(TEXT_OK), 'should match expected from by function list');
});
//# sourceMappingURL=string-matcher.spec.js.map