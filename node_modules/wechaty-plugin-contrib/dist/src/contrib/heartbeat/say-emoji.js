"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.sayEmoji = void 0;
const config_1 = require("../../config");
const get_emoji_1 = require("./get-emoji");
function sayEmoji(event, talkerList, emojiOption) {
    return async () => {
        config_1.log.verbose('WechatyPluginContrib', 'Heartbeat sayEmoji(%s)', event);
        if (talkerList.length <= 0) {
            return;
        }
        const wechaty = talkerList[0].wechaty;
        const emojiText = await get_emoji_1.getEmoji(event, wechaty, emojiOption);
        if (!emojiText) {
            return;
        }
        for (const talker of talkerList) {
            if (!talker.wechaty.logonoff()) {
                config_1.log.verbose('WechatyPluginContrib', 'Heartbeat sayEmoji %s is logoff', talker);
                continue;
            }
            try {
                await talker.say(emojiText);
            }
            catch (e) {
                wechaty.emit('error', e);
            }
        }
    };
}
exports.sayEmoji = sayEmoji;
//# sourceMappingURL=say-emoji.js.map