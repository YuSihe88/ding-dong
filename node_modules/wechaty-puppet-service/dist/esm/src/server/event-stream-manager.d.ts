import { puppet as grpcPuppet, grpc } from 'wechaty-grpc';
import { Puppet } from 'wechaty-puppet';
declare class EventStreamManager {
    puppet: Puppet;
    protected eventStream: undefined | grpc.ServerWritableStream<grpcPuppet.EventRequest, grpcPuppet.EventResponse>;
    private puppetListening;
    constructor(puppet: Puppet);
    busy(): boolean;
    start(stream: grpc.ServerWritableStream<grpcPuppet.EventRequest, grpcPuppet.EventResponse>): void;
    stop(): void;
    grpcEmit(type: grpcPuppet.EventTypeMap[keyof grpcPuppet.EventTypeMap], // https://stackoverflow.com/a/49286056/1123955
    obj: object): void;
    connectPuppetEventToStreamingCall(): () => void;
    /**
     * Detect if the streaming call was gone (GRPC disconnects)
     *  https://github.com/grpc/grpc/issues/8117#issuecomment-362198092
     */
    private onStreamingCallEnd;
}
export { EventStreamManager };
//# sourceMappingURL=event-stream-manager.d.ts.map